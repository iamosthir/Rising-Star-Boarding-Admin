(self.webpackChunk=self.webpackChunk||[]).push([[604],{3604:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>n});const s={data:function(){return{is_loading:!0,priceCalculated:!1,workingOnPrice:!1,price:"",discount:0,customer_data:{},pets:[],dogFields:1,availableKennels:[],form:new Form({dogs:[{dog_id:"",kennel:""}],customer_id:this.$route.params.id,start_date:"",end_date:"",totalDays:""})}},created:function(){this.getCustomerDetails()},methods:{getCustomerDetails:function(){var t=this;axios.get("/admin/api/get-customer-data",{params:{customer_id:this.$route.params.id}}).then((function(t){return t.data})).then((function(e){"ok"==e.status?(t.customer_data=e.data,t.pets=e.data.pet):t.$router.push({name:"booking.new"})}))},getAvailableKennels:function(){var t=this;if(""!=this.form.start_date&&""!=this.form.end_date){var e=moment(this.form.start_date),a=moment(this.form.end_date);this.form.totalDays=a.diff(e,"days")+1,axios.get("/admin/api/get-available-kennels",{params:{startDate:this.form.start_date,endDate:this.form.end_date}}).then((function(t){return t.data})).then((function(e){t.availableKennels=e})).catch((function(t){console.error(t.response.data)}))}},addField:function(){this.form.dogs.push({dog_id:"",kennel:""}),this.dogFields+=1},removeField:function(){this.form.dogs.pop(),this.dogFields-=1},submit:function(){this.form.post("/admin/api/submit-boarding-order").then((function(t){return t.data})).then((function(t){console.log(t),"ok"==t.status?swal.fire("Success","New booking was successfull","success").then((function(){})):swal.fire("Failed","Something went wrong","error")})).catch((function(t){console.error(t.response.data)}))},calculatePrice:function(){var t=this;this.workingOnPrice=!0,this.form.post("/admin/api/calculate-price").then((function(t){return t.data})).then((function(e){console.log(e),t.workingOnPrice=!1,"ok"==e.status&&(t.price=e.price,t.discount=e.discountPrice,t.priceCalculated=!0)})).catch((function(e){console.error(e.response.data),t.workingOnPrice=!1}))}}};const n=(0,a(1900).Z)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"section"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-header d-flex justify-content-between"},[a("h4",[t._v("Bookings For Boarding")]),t._v(" "),a("router-link",{staticClass:"raise-button",attrs:{tag:"button",to:{name:"booking.new"}}},[a("i",{staticClass:"fas fa-arrow-left"}),t._v(" Go back\n          ")])],1),t._v(" "),a("div",{staticClass:"card-body"},[a("h6",{staticClass:"text-muted"},[t._v("Customer Name: "),a("strong",{staticClass:"text-success"},[t._v(t._s(t.customer_data.first_name+" "+t.customer_data.last_name))])]),t._v(" "),t._m(0),t._v(" "),a("hr"),t._v(" "),a("form",{on:{submit:function(e){return e.preventDefault(),t.submit()}}},[a("fieldset",[a("legend",[t._v("Choose Stay Days "),t.form.totalDays?a("span",{staticClass:"text-warning"},[a("strong",[t._v("(Total : "+t._s(t.form.totalDays)+" days)")])]):t._e()]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:""}},[t._v("Start Date")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.start_date,expression:"form.start_date"}],staticClass:"form-control",attrs:{disabled:t.priceCalculated,type:"date",required:""},domProps:{value:t.form.start_date},on:{change:t.getAvailableKennels,input:function(e){e.target.composing||t.$set(t.form,"start_date",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:""}},[t._v("End date ")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.end_date,expression:"form.end_date"}],staticClass:"form-control",attrs:{disabled:t.priceCalculated,type:"date",required:""},domProps:{value:t.form.end_date},on:{change:t.getAvailableKennels,input:function(e){e.target.composing||t.$set(t.form,"end_date",e.target.value)}}})])]),t._v(" "),a("hr")]),t._v(" "),t._l(t.dogFields,(function(e,s){return a("fieldset",{key:s},[a("legend",[t._v("Dog "+t._s(s+1))]),t._v(" "),a("hr"),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4 form-group"},[a("label",{attrs:{for:""}},[t._v("Select Pet")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.form.dogs[s].dog_id,expression:"form.dogs[i].dog_id"}],staticClass:"form-control",attrs:{required:"",disabled:t.priceCalculated},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form.dogs[s],"dog_id",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"",hidden:""}},[t._v("Select Pet")]),t._v(" "),t._l(t.pets,(function(e,s){return a("option",{key:s,domProps:{value:e.id}},[t._v(t._s(e.name)+" - "+t._s(e.color))])}))],2)]),t._v(" "),a("div",{staticClass:"col-md-4 form-group"},[a("label",{attrs:{for:""}},[t._v("Available Kennels "),t.availableKennels[s]?a("span",{class:t.availableKennels.length>0?"text-success":"text-danger"},[t._v("("+t._s(t.availableKennels.length)+" Free Kennel Space Found)")]):t._e()]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.form.dogs[s].kennel,expression:"form.dogs[i].kennel"}],staticClass:"form-control",attrs:{required:"",disabled:t.priceCalculated},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form.dogs[s],"kennel",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"",hidden:""}},[t._v("Choose Kennel")]),t._v(" "),t._l(t.availableKennels,(function(e,s){return a("option",{key:s,domProps:{value:e.id}},[t._v(t._s(e.title)+" - "+t._s(e.unique_id)+" - "+t._s(e.size))])}))],2)])])])})),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4 form-group"},[a("button",{staticClass:"btn btn-outline-secondary",attrs:{disabled:t.priceCalculated,type:"button",title:"Add another dog"},on:{click:function(e){return e.preventDefault(),t.addField.apply(null,arguments)}}},[a("i",{staticClass:"fas fa-plus"})]),t._v(" "),t.dogFields>1?a("button",{staticClass:"btn btn-outline-danger",attrs:{disabled:t.priceCalculated,type:"button",title:"Remove Last Row"},on:{click:function(e){return e.preventDefault(),t.removeField.apply(null,arguments)}}},[a("i",{staticClass:"fas fa-trash"})]):t._e()]),t._v(" "),a("div",{staticClass:"col-md-12 form-group"},[a("label",{attrs:{for:""}},[t._v("Price ($)")]),t._v(" "),t.workingOnPrice?a("span",{staticClass:"text-success"},[a("i",{staticClass:"nice fas fa-sync-alt"})]):t._e(),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.price,expression:"price"}],staticClass:"form-control",attrs:{type:"number",disabled:""},domProps:{value:t.price},on:{input:function(e){e.target.composing||(t.price=e.target.value)}}}),t._v(" "),t.discount>0?a("p",{staticClass:"mt-2"},[t._v("Original Price: "),a("strong",{staticClass:"text-warning"},[a("strike",[t._v("$ "+t._s(t.discount))])],1)]):t._e()]),t._v(" "),a("div",{staticClass:"col-md-12 form-group"},[t.priceCalculated?t._e():a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.calculatePrice}},[t._v("Next "),a("i",{staticClass:"fas fa-arrow-right"})]),t._v(" "),t.priceCalculated?a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){t.priceCalculated=!1}}},[t._v("Edit Booking")]):t._e(),t._v(" "),t.priceCalculated?a("Button",{staticClass:"btn btn-success",attrs:{form:t.form}},[t._v("Book Now")]):t._e()],1)])],2)])])])])])}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"text-muted"},[t._v("Booking Type : "),a("strong",{staticClass:"text-warning"},[t._v("Boarding")])])}],!1,null,null,null).exports}}]);