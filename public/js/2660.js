(self.webpackChunk=self.webpackChunk||[]).push([[2660],{2660:(t,i,a)=>{"use strict";a.r(i),a.d(i,{default:()=>s});const n={components:{"from-now":function(){return a.e(5457).then(a.bind(a,5457))}},data:function(){return{is_loading:!0,notifications:[],paginateData:{}}},methods:{getAllNotifications:function(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;axios.get("/admin/api/get-all-notifications-list?page="+i).then((function(t){return t.data})).then((function(i){t.paginateData=i,t.notifications=i.data,t.is_loading=!1})).catch((function(t){console.error(t.response.data)}))},deleteNotification:function(t,i){var a=this;axios.post("/admin/api/delete-notification",{id:t}).then((function(n){"ok"==n.data.status&&(a.notifications.splice(i,1),a.$root.$refs.headerNotification.deleteIfExists(t))})).catch((function(t){console.error(t.response.data)}))},clearAll:function(){var t=this;axios.post("/admin/api/clear-all-notification").then((function(i){"ok"==i.data.status&&(t.notifications=[],swal.fire("Notification cleard",i.data.msg,"success"),t.$root.$refs.headerNotification.resetAll())}))},openNotification:function(t,i,a,n,s){var o=this;"unseen"==a&&(this.notifications[i].status="seen",axios.post("/admin/api/seen-notification",{id:t}).then((function(i){"ok"==i.data.status&&o.$root.$refs.headerNotification.makeSeen(t,"seen"!=a)})).catch((function(t){console.error(t.response.data)}))),"boarding"==n?this.$router.push({name:"boarding.edit",params:{id:s}}):this.$router.push({name:"grooming.edit",params:{id:s}})}},created:function(){this.getAllNotifications()}};const s=(0,a(1900).Z)(n,(function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"row justify-content-center"},[a("div",{staticClass:"col-md-8"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-header d-flex justify-content-between"},[a("h4",{staticClass:"text-muted"},[t._v("Notifications")]),t._v(" "),a("div",[a("button",{staticClass:"btn",on:{click:t.clearAll}},[a("i",{staticClass:"fas fa-trash"}),t._v(" Clear All")])])]),t._v(" "),a("div",{staticClass:"card-body"},[t.is_loading?a("div",{staticClass:"row"},t._l(10,(function(t){return a("div",{key:t,staticClass:"col-md-12"},[a("skeleton",{attrs:{width:"100%",height:"60px"}})],1)})),0):t._e(),t._v(" "),t.is_loading?t._e():a("div",{staticClass:"row"},[0==t.notifications.length?a("div",{staticClass:"col-md-12 text-center"},[a("h6",{staticClass:"text-muted"},[t._v("No new notifications")])]):t._l(t.notifications,(function(i,n){return["boarding"==i.type?a("div",{key:n,staticClass:"col-md-12 notification",class:{unread:"unseen"==i.status}},[a("div",{staticClass:"d-flex justify-content-between w-75 pull-left",on:{click:function(a){return t.openNotification(i.id,n,i.status,i.type,i.booking_id)}}},[t._m(0,!0),t._v(" "),a("div",{staticClass:"id"},[a("p",[t._v("Boarding ID #"+t._s(i.booking_id))])]),t._v(" "),a("div",{staticClass:"content"},[a("h6",[a("strong",[t._v("Boarding | "+t._s(i.boarding_string))])])]),t._v(" "),a("div",{staticClass:"time"},[a("from-now",{attrs:{date:i.created_at}})],1)]),t._v(" "),a("div",{staticClass:"action w-auto pull-right"},[a("button",{staticClass:"btn btn-outline-info btn-sm",on:{click:function(a){return t.deleteNotification(i.id,n)}}},[a("i",{staticClass:"fas fa-trash"})])])]):t._e(),t._v(" "),"grooming"==i.type?a("div",{key:n,staticClass:"col-md-12 notification",class:{unread:"unseen"==i.status}},[a("div",{staticClass:"d-flex justify-content-between w-75 pull-left",on:{click:function(a){return t.openNotification(i.id,n,i.status,i.type,i.booking_id)}}},[t._m(1,!0),t._v(" "),a("div",{staticClass:"id"},[a("p",[t._v("Grooming ID #"+t._s(i.booking_id))])]),t._v(" "),a("div",{staticClass:"content"},[a("h6",[a("strong",[t._v(t._s(i.grooming_string))])])]),t._v(" "),a("div",{staticClass:"time"},[a("from-now",{attrs:{date:i.created_at}})],1)]),t._v(" "),a("div",{staticClass:"action w-auto pull-right"},[a("button",{staticClass:"btn btn-outline-info btn-sm",on:{click:function(a){return t.deleteNotification(i.id,n)}}},[a("i",{staticClass:"fas fa-trash"})])])]):t._e()]}))],2)]),t._v(" "),a("div",{staticClass:"card-footer"},[a("div",{staticClass:"row justify-content-center"},[a("pagination",{attrs:{data:t.paginateData},on:{"pagination-change-page":t.getAllNotifications}})],1)])])])])}),[function(){var t=this.$createElement,i=this._self._c||t;return i("span",{staticClass:"dropdown-item-icon bg-white text-white"},[i("img",{attrs:{src:"/images/boarding.png",width:"25px",alt:""}})])},function(){var t=this.$createElement,i=this._self._c||t;return i("span",{staticClass:"dropdown-item-icon bg-white text-white"},[i("img",{attrs:{src:"/images/grooming.png",width:"25px",alt:""}})])}],!1,null,null,null).exports}}]);