(self.webpackChunk=self.webpackChunk||[]).push([[6095],{6095:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>s});const r={data:function(){return{is_loading:!0,customer_data:{},pets:[],dogFields:1,kennels:[],form:new Form({dogs:[{dog_id:"",kennel:""}],customer_id:this.$route.params.id,start_date:"",end_date:"",totalDays:"",price:"",note:"",requestedKennel:"1 Kennel with 1 dog",draft:!1})}},created:function(){this.getCustomerDetails(),this.getAvailableKennels()},methods:{getCustomerDetails:function(){var t=this;axios.get("/admin/api/get-customer-data",{params:{customer_id:this.$route.params.id}}).then((function(t){return t.data})).then((function(e){"ok"==e.status?(t.customer_data=e.data,t.pets=e.data.pet):t.$router.push({name:"booking.new"})}))},getAvailableKennels:function(){var t=this;axios.get("/admin/api/list-all-kennels").then((function(t){return t.data})).then((function(e){t.kennels=e})).catch((function(t){console.error(t.response.data)}))},addField:function(){this.form.dogs.push({dog_id:"",kennel:""}),this.dogFields+=1},removeField:function(){this.form.dogs.pop(),this.dogFields-=1},submit:function(){var t=this;this.form.post("/admin/api/submit-boarding-order").then((function(t){return t.data})).then((function(e){console.log(e),"ok"==e.status?swal.fire("Success",e.msg,"success").then((function(){1==e.draft?t.$router.push({name:"booking.draft"}):t.$router.push({name:"boarding.list"})})):swal.fire("Failed","Something went wrong","error")})).catch((function(t){console.error(t.response.data)}))},calculatePrice:function(){var t=this;this.workingOnPrice=!0,this.form.post("/admin/api/calculate-price").then((function(t){return t.data})).then((function(e){console.log(e),t.workingOnPrice=!1,"ok"==e.status&&(t.price=e.price,t.discount=e.discountPrice,t.priceCalculated=!0)})).catch((function(e){console.error(e.response.data),t.workingOnPrice=!1}))}}};const s=(0,a(1900).Z)(r,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"section"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-header d-flex justify-content-between"},[a("h4",[t._v("Bookings For Boarding")]),t._v(" "),a("router-link",{staticClass:"raise-button",attrs:{tag:"button",to:{name:"booking.new"}}},[a("i",{staticClass:"fas fa-arrow-left"}),t._v(" Go back\n          ")])],1),t._v(" "),a("div",{staticClass:"card-body"},[a("h6",{staticClass:"text-muted"},[t._v("Customer Name: "),a("strong",{staticClass:"text-success"},[t._v(t._s(t.customer_data.first_name+" "+t.customer_data.last_name))])]),t._v(" "),t._m(0),t._v(" "),a("hr"),t._v(" "),a("form",{on:{submit:function(e){return e.preventDefault(),t.submit()}}},[a("fieldset",[a("legend",[t._v("Choose Stay Days "),t.form.totalDays?a("span",{staticClass:"text-warning"},[a("strong",[t._v("(Total : "+t._s(t.form.totalDays)+" days)")])]):t._e()]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"form-group col-md-6"},[t._m(1),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.start_date,expression:"form.start_date"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("start_date")},attrs:{type:"date",required:""},domProps:{value:t.form.start_date},on:{change:t.getAvailableKennels,input:function(e){e.target.composing||t.$set(t.form,"start_date",e.target.value)}}}),t._v(" "),a("HasError",{attrs:{form:t.form,field:"start_date"}})],1),t._v(" "),a("div",{staticClass:"form-group col-md-6"},[t._m(2),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.end_date,expression:"form.end_date"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("end_date")},attrs:{type:"date",required:""},domProps:{value:t.form.end_date},on:{change:t.getAvailableKennels,input:function(e){e.target.composing||t.$set(t.form,"end_date",e.target.value)}}}),t._v(" "),a("HasError",{attrs:{form:t.form,field:"end_date"}})],1),t._v(" "),a("div",{staticClass:"col-md-4 mb-3 my-form"},[a("label",{attrs:{for:""}},[t._v("Select the number of kennels")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.form.requestedKennel,expression:"form.requestedKennel"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"requestedKennel",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"1 Kennel with 1 dog"}},[t._v("1 Kennel with 1 dog")]),t._v(" "),a("option",{attrs:{value:"1 Kennel with 2 dog"}},[t._v("1 Kennel with 2 dog")]),t._v(" "),a("option",{attrs:{value:"1 Kennel with 3 dog"}},[t._v("1 Kennel with 3 dog")]),t._v(" "),a("option",{attrs:{value:"2 Kennel with 1 dog each"}},[t._v("2 Kennel with 1 dog each")])])])]),t._v(" "),a("hr")]),t._v(" "),t._l(t.dogFields,(function(e,r){return a("fieldset",{key:r},[a("legend",[t._v("Dog "+t._s(r+1))]),t._v(" "),a("hr"),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4 form-group"},[t._m(3,!0),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.form.dogs[r].dog_id,expression:"form.dogs[i].dog_id"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form.dogs[r],"dog_id",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"",hidden:""}},[t._v("Select Pet")]),t._v(" "),t._l(t.pets,(function(e,r){return a("option",{key:r,domProps:{value:e.id}},[t._v(t._s(e.name)+" - "+t._s(e.color))])}))],2)]),t._v(" "),a("div",{staticClass:"col-md-4 form-group"},[t._m(4,!0),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.form.dogs[r].kennel,expression:"form.dogs[i].kennel"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form.dogs[r],"kennel",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"",hidden:""}},[t._v("Choose Kennel")]),t._v(" "),t._l(t.kennels,(function(e,r){return a("option",{key:r,domProps:{value:e.unique_id}},[t._v(t._s(e.title)+" - "+t._s(e.unique_id)+" - "+t._s(e.size))])}))],2)])])])})),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4 form-group"},[t.pets.length>1&&t.pets.length!=t.form.dogs.length?a("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button",title:"Add another dog"},on:{click:function(e){return e.preventDefault(),t.addField.apply(null,arguments)}}},[a("i",{staticClass:"fas fa-plus"})]):t._e(),t._v(" "),t.dogFields>1?a("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button",title:"Remove Last Row"},on:{click:function(e){return e.preventDefault(),t.removeField.apply(null,arguments)}}},[a("i",{staticClass:"fas fa-trash"})]):t._e()]),t._v(" "),a("div",{staticClass:"col-md-12 form-group"},[a("label",{attrs:{for:""}},[t._v("Note")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.note,expression:"form.note"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("note")},attrs:{placeholder:"Write..."},domProps:{value:t.form.note},on:{input:function(e){e.target.composing||t.$set(t.form,"note",e.target.value)}}}),t._v(" "),a("HasError",{attrs:{form:t.form,field:"note"}})],1),t._v(" "),a("div",{staticClass:"col-md-6 form-group"},[t._m(5),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.price,expression:"form.price"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("price")},attrs:{type:"number",required:0==t.form.draft},domProps:{value:t.form.price},on:{input:function(e){e.target.composing||t.$set(t.form,"price",e.target.value)}}}),t._v(" "),a("HasError",{attrs:{form:t.form,field:"price"}})],1),t._v(" "),a("div",{staticClass:"col-md-12 form-group"},[a("label",{attrs:{for:"draftCheck"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.draft,expression:"form.draft"}],attrs:{id:"draftCheck",type:"checkbox"},domProps:{checked:Array.isArray(t.form.draft)?t._i(t.form.draft,null)>-1:t.form.draft},on:{change:function(e){var a=t.form.draft,r=e.target,s=!!r.checked;if(Array.isArray(a)){var o=t._i(a,null);r.checked?o<0&&t.$set(t.form,"draft",a.concat([null])):o>-1&&t.$set(t.form,"draft",a.slice(0,o).concat(a.slice(o+1)))}else t.$set(t.form,"draft",s)}}}),t._v(" Save this booking as draft")])]),t._v(" "),a("div",{staticClass:"col-md-12 form-group"},[a("Button",{staticClass:"btn btn-success",attrs:{form:t.form}},[t._v("Book Now")])],1)])],2)])])])])])}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"text-muted"},[t._v("Booking Type : "),a("strong",{staticClass:"text-warning"},[t._v("Boarding")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:""}},[t._v("Start Date "),a("span",{staticClass:"text-danger"},[a("strong",[t._v("*")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:""}},[t._v("End date "),a("span",{staticClass:"text-danger"},[a("strong",[t._v("*")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:""}},[t._v("Select Pet "),a("span",{staticClass:"text-danger"},[a("strong",[t._v("*")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:""}},[t._v("Assign Kennel "),a("span",{staticClass:"text-danger"},[a("strong",[t._v("*")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:""}},[t._v("Price ($) "),a("span",{staticClass:"text-danger"},[a("strong",[t._v("*")])])])}],!1,null,null,null).exports}}]);