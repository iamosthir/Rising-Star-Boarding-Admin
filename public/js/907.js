(self.webpackChunk=self.webpackChunk||[]).push([[907],{1907:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>r});const s={data:function(){return{emails:[],is_loading:!0,createMode:!1,form:new Form({host:"",port:"",driver:"smtp",encryption:"ssl",user:"",pass:"",sender_name:"",sender_email:"",defaultMail:!1})}},methods:{getMails:function(){var t=this;axios.get("/admin/api/get-emails").then((function(t){return t.data})).then((function(e){t.emails=e,t.is_loading=!1})).catch((function(t){console.error(t.response.data)}))},submitForm:function(){var t=this;this.form.post("/admin/api/create-email-setup").then((function(t){return t.data})).then((function(e){"ok"==e.status&&swal.fire("Email Account Added",e.msg,"success").then((function(){t.emails.unshift(e.data),t.form.reset(),t.createMode=!1}))})).catch((function(t){console.error(t.response.data)}))},deleteEmail:function(t,e){var a=this;axios.post("/admin/api/delete-email",{id:t}).then((function(t){return t.data})).then((function(t){"ok"==t.status&&(swal.fire("Item deleted",t.msg,"success"),a.emails.splice(e,1))})).catch((function(t){console.error(t.response.data)}))},setDefault:function(t,e){var a=this;axios.post("/admin/api/set-default-email",{id:t}).then((function(t){return t.data})).then((function(t){"ok"==t.status&&(a.emails.forEach((function(t,e){t.default_email=0})),a.emails[e].default_email=1)})).catch((function(t){console.error(t.response.data)}))}},created:function(){this.getMails()}};const r=(0,a(1900).Z)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[1==t.createMode?a("div",{staticClass:"card"},[a("div",{staticClass:"card-header d-flex justify-content-end"},[a("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(e){t.createMode=!1}}},[t._v("Cancel")])]),t._v(" "),a("div",{staticClass:"card-body"},[a("h3",{staticClass:"text-muted text-center"},[t._v("Email Setup")]),t._v(" "),a("form",{on:{submit:function(e){return e.preventDefault(),t.submitForm.apply(null,arguments)}}},[a("div",{staticClass:"row justify-content-center mt-5"},[a("div",{staticClass:"col-md-7 mt-4"},[t._m(0),t._v(" "),a("label",{attrs:{for:""}},[t._v("HOST NAME")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.host,expression:"form.host"}],staticClass:"form-control",attrs:{type:"text",placeholder:"example.com"},domProps:{value:t.form.host},on:{input:function(e){e.target.composing||t.$set(t.form,"host",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"col-md-7 mt-4"},[a("label",{attrs:{for:""}},[t._v("PORT NUMBER")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.port,expression:"form.port"}],staticClass:"form-control",attrs:{type:"number",placeholder:"e.g: 465"},domProps:{value:t.form.port},on:{input:function(e){e.target.composing||t.$set(t.form,"port",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"col-md-7 mt-4"},[a("label",{attrs:{for:""}},[t._v("MAIL DRIVER (SMTP Recommended)")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.form.driver,expression:"form.driver"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"driver",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"smtp"}},[t._v("SMTP")]),t._v(" "),a("option",{attrs:{value:"mailgun"}},[t._v("MAIL GUN")]),t._v(" "),a("option",{attrs:{value:"sendmail"}},[t._v("SEND MAIL")]),t._v(" "),a("option",{attrs:{value:"postmark"}},[t._v("POST MARK")])])]),t._v(" "),a("div",{staticClass:"col-md-7 mt-4"},[a("label",{attrs:{for:""}},[t._v("ENCRYPTION TYPE (SSL Recommended | Use 'TLS' for GMAIL)")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.form.encryption,expression:"form.encryption"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"encryption",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"ssl"}},[t._v("SSL")]),t._v(" "),a("option",{attrs:{value:"tls"}},[t._v("TLS")])])]),t._v(" "),a("div",{staticClass:"col-md-7 mt-4"},[t._m(1),t._v(" "),a("label",{attrs:{for:""}},[t._v("USER EMAIL")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user,expression:"form.user"}],staticClass:"form-control",attrs:{type:"email",placeholder:"youruser@name.com",autocomplete:"off"},domProps:{value:t.form.user},on:{input:function(e){e.target.composing||t.$set(t.form,"user",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"col-md-7 mt-4"},[a("label",{attrs:{for:""}},[t._v("USER PASSWORD")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.pass,expression:"form.pass"}],staticClass:"form-control",attrs:{type:"password",placeholder:"Type your password",autocomplete:"off"},domProps:{value:t.form.pass},on:{input:function(e){e.target.composing||t.$set(t.form,"pass",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"col-md-7 mt-4"},[a("label",{attrs:{for:""}},[t._v("SENDER EMAIL (Optional)")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.sender_email,expression:"form.sender_email"}],staticClass:"form-control",attrs:{type:"email",placeholder:"youruser@name.com"},domProps:{value:t.form.sender_email},on:{input:function(e){e.target.composing||t.$set(t.form,"sender_email",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"col-md-7 mt-4"},[a("label",{attrs:{for:""}},[t._v("SENDER NAME (Optional)")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.sender_name,expression:"form.sender_name"}],staticClass:"form-control",attrs:{type:"text",placeholder:"youruser@name.com"},domProps:{value:t.form.sender_name},on:{input:function(e){e.target.composing||t.$set(t.form,"sender_name",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"col-md-7 mt-4"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.defaultMail,expression:"form.defaultMail"}],attrs:{type:"checkbox",id:"defaultMail"},domProps:{checked:Array.isArray(t.form.defaultMail)?t._i(t.form.defaultMail,null)>-1:t.form.defaultMail},on:{change:function(e){var a=t.form.defaultMail,s=e.target,r=!!s.checked;if(Array.isArray(a)){var o=t._i(a,null);s.checked?o<0&&t.$set(t.form,"defaultMail",a.concat([null])):o>-1&&t.$set(t.form,"defaultMail",a.slice(0,o).concat(a.slice(o+1)))}else t.$set(t.form,"defaultMail",r)}}}),t._v(" "),a("label",{staticClass:"ml-2",attrs:{for:"defaultMail"}},[t._v("Set as default email")])]),t._v(" "),a("div",{staticClass:"col-md-7 mt-4 mb-4 text-center"},[a("Button",{staticClass:"btn btn-primary w-100",attrs:{form:t.form}},[t._v("SAVE")])],1),t._v(" "),a("div",{staticClass:"col-md-7 mt-4 mb-4"},[a("AlertErrors",{attrs:{form:t.form,message:"Something went wrong"}})],1)])])])]):t._e(),t._v(" "),0==t.createMode?a("div",{staticClass:"card"},[a("div",{staticClass:"card-header d-flex justify-content-between"},[a("h4",[t._v("Email Accounts")]),t._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){t.createMode=!0}}},[t._v("Add new "),a("i",{staticClass:"fas fa-plus"})])]),t._v(" "),a("div",{staticClass:"card-body"},[a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-stripped"},[t._m(2),t._v(" "),a("tbody",[t.is_loading?a("tr",[a("td",{attrs:{colspan:"8"}},t._l(10,(function(t){return a("skeleton",{key:t,staticClass:"mt-2",attrs:{width:"100%",height:"40px"}})})),1)]):t._l(t.emails,(function(e,s){return a("tr",{key:s},[a("td",[t._v(t._s(s+1))]),t._v(" "),a("td",{staticClass:"text-muted"},[a("strong",[t._v(t._s(e.user_name))])]),t._v(" "),a("td",[t._v(t._s(e.host))]),t._v(" "),a("td",[t._v(t._s(e.port))]),t._v(" "),a("td",[t._v(t._s(e.encryption))]),t._v(" "),a("td",[t._v(t._s(e.sender_name))]),t._v(" "),a("td",[t._v(t._s(e.sender_email))]),t._v(" "),a("td",[e.default_email?a("span",{staticClass:"text-success"},[a("i",{staticClass:"fas fa-check"}),t._v(" Default")]):a("button",{staticClass:"btn btn-sm btn-primary",on:{click:function(a){return t.setDefault(e.id,s)}}},[t._v("Set Default")])]),t._v(" "),a("td",[a("router-link",{staticClass:"btn btn-sm btn-warning",attrs:{to:{name:"admin-email.edit",params:{id:e.id}}}},[a("i",{staticClass:"fas fa-edit"})]),t._v(" "),a("button",{staticClass:"btn btn-sm btn-danger",on:{click:function(a){return t.deleteEmail(e.id,s)}}},[a("i",{staticClass:"fas fa-trash"})])],1)])}))],2)])])])]):t._e()])])}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"mb-4 text-muted"},[a("strong",[t._v("HOST INFO")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"mb-4 text-muted"},[a("strong",[t._v("USER CREDENTIALS")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th"),t._v(" "),a("th",[t._v("USER NAME")]),t._v(" "),a("th",[t._v("HOST")]),t._v(" "),a("th",[t._v("PORT")]),t._v(" "),a("th",[t._v("ENCRYPTION TYPE")]),t._v(" "),a("th",[t._v("SENDER NAME")]),t._v(" "),a("th",[t._v("SENDER EMAIL")]),t._v(" "),a("th",[t._v("DEFAULT")]),t._v(" "),a("th",[t._v("ACTION")])])])}],!1,null,null,null).exports}}]);