(self.webpackChunk=self.webpackChunk||[]).push([[5193],{5193:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>o});const a={data:function(){return{is_loading:!0,paginateData:{},customers:[],total_customer:0,searchText:"",searchMode:!1,searchCustomers:[],searchPaginate:{}}},created:function(){this.getCustomerList()},methods:{getCustomerList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.is_loading=!0,axios.get("/admin/api/customer-list?page="+e).then((function(t){return t.data})).then((function(e){t.total_customer=e.total,t.paginateData=e.customer,t.customers=e.customer.data,t.is_loading=!1})).catch((function(t){console.error(t.response.data)}))},deleteCustomer:function(t,e){var s=this;swal.fire({title:"Are you sure?",text:"Once deleted can't be restored",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(a){a.isConfirmed&&axios.post("/admin/api/delete-customer",{customer_id:t}).then((function(t){return t.data})).then((function(t){console.log(t),"ok"==t.status?(s.customers.splice(e,1),swal.fire({title:"Success",icon:"success",text:t.msg})):swal.fire({title:"Failed",text:"Internal Server Error",icon:"error"})})).catch((function(t){console.error(t.response.data)}))}))},searchCustomer:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;""!=this.searchText?(this.searchMode=!0,this.is_loading=!0,axios.get("/admin/api/search-customer?page="+e,{params:{text:this.searchText}}).then((function(t){return t.data})).then((function(e){t.searchCustomers=e.data,t.searchPaginate=e,t.is_loading=!1})).catch((function(t){console.error(t.response.data)}))):this.searchMode=!1}}};const o=(0,s(1900).Z)(a,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"section"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-12"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-header d-flex justify-content-between"},[s("h4",[t._v("Customer List")]),t._v(" "),s("router-link",{staticClass:"btn btn-sm btn-primary",attrs:{to:{name:"customer.create"}}},[t._v("Create new customer "),s("i",{staticClass:"fas fa-plus"})])],1),t._v(" "),s("div",{staticClass:"card-body"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-12"},[s("h6",[t._v("Total "),s("span",{staticClass:"text-success"},[t._v(t._s(t.total_customer))]),t._v(" Customers")])]),t._v(" "),s("div",{staticClass:"col-md-6 mt-3"},[s("label",{attrs:{for:""}},[t._v("Search Customer")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText,expression:"searchText"}],staticClass:"form-control",attrs:{type:"search",placeholder:"Search Customer by name, email, phone"},domProps:{value:t.searchText},on:{input:[function(e){e.target.composing||(t.searchText=e.target.value)},t.searchCustomer]}})]),t._v(" "),s("div",{staticClass:"col-md-12 mt-3"},[t.is_loading?s("div",{staticClass:"section"},t._l(10,(function(t,e){return s("skeleton",{key:e,staticClass:"mt-2",attrs:{width:"100%",height:"40px"}})})),1):t._e(),t._v(" "),!t.is_loading&&t.customers.length>0&&!t.searchMode?s("div",{staticClass:"table-responsive-md"},[s("table",{staticClass:"table table-hover table-striped"},[t._m(0),t._v(" "),s("tbody",t._l(t.customers,(function(e,a){return s("tr",{key:a},[s("td",[t._v(t._s(e.first_name+" "+e.last_name))]),t._v(" "),s("td",[t._v(t._s(e.cell_phone))]),t._v(" "),s("td",[t._v(t._s(e.email))]),t._v(" "),s("td",[t._v(t._s(e.pet.length))]),t._v(" "),s("td",[s("div",{staticClass:"dropdown"},[s("button",{staticClass:"btn btn sm btn-primary dropdown-toggle",attrs:{type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t._v("\n                                                        New booking\n                                                      ")]),t._v(" "),s("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dropdownMenuButton"}},[s("router-link",{staticClass:"dropdown-item",attrs:{to:{name:"booking.boarding",params:{id:e.id}},href:"#"}},[t._v("Boarding")]),t._v(" "),s("router-link",{staticClass:"dropdown-item",attrs:{to:{name:"booking.grooming",params:{id:e.id}},href:"#"}},[t._v("Grooming")])],1)])]),t._v(" "),s("td",[s("router-link",{staticClass:"btn btn-success btn-sm",attrs:{to:{name:"customer.profile",params:{customerId:e.id}}}},[t._v("View")]),t._v(" "),s("button",{staticClass:"btn btn-sm btn-warning",on:{click:function(s){return t.deleteCustomer(e.id,a)}}},[t._v("Delete")])],1)])})),0)]),t._v(" "),s("div",{staticClass:"row justify-content-center mt-4"},[s("pagination",{attrs:{data:t.paginateData},on:{"pagination-change-page":t.getCustomerList}})],1)]):t._e(),t._v(" "),!t.is_loading&&t.searchCustomers.length>0&&t.searchMode?s("div",{staticClass:"table-responsive-md"},[s("table",{staticClass:"table table-hover table-striped"},[t._m(1),t._v(" "),s("tbody",t._l(t.searchCustomers,(function(e,a){return s("tr",{key:a},[s("td",[t._v(t._s(e.first_name+" "+e.last_name))]),t._v(" "),s("td",[t._v(t._s(e.cell_phone))]),t._v(" "),s("td",[t._v(t._s(e.email))]),t._v(" "),s("td",[t._v(t._s(e.pet.length))]),t._v(" "),s("td",[s("div",{staticClass:"dropdown"},[s("button",{staticClass:"btn btn sm btn-primary dropdown-toggle",attrs:{type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t._v("\n                                                        New booking\n                                                      ")]),t._v(" "),s("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dropdownMenuButton"}},[s("router-link",{staticClass:"dropdown-item",attrs:{to:{name:"booking.boarding",params:{id:e.id}},href:"#"}},[t._v("Boarding")]),t._v(" "),s("router-link",{staticClass:"dropdown-item",attrs:{to:{name:"booking.grooming",params:{id:e.id}},href:"#"}},[t._v("Grooming")])],1)])]),t._v(" "),s("td",[s("router-link",{staticClass:"btn btn-success btn-sm",attrs:{to:{name:"customer.profile",params:{customerId:e.id}}}},[t._v("View")]),t._v(" "),s("button",{staticClass:"btn btn-sm btn-warning",on:{click:function(s){return t.deleteCustomer(e.id,a)}}},[t._v("Delete")])],1)])})),0)]),t._v(" "),s("div",{staticClass:"row justify-content-center mt-4"},[s("pagination",{attrs:{data:t.searchPaginate},on:{"pagination-change-page":t.searchCustomer}})],1)]):t._e()])])])])])])])}),[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",[t._v("Csutomer Name")]),t._v(" "),s("th",[t._v("Cell Number")]),t._v(" "),s("th",[t._v("Email")]),t._v(" "),s("th",[t._v("Total Pets")]),t._v(" "),s("th",[t._v("Booking")]),t._v(" "),s("th",[t._v("Action")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",[t._v("Csutomer Name")]),t._v(" "),s("th",[t._v("Cell Number")]),t._v(" "),s("th",[t._v("Email")]),t._v(" "),s("th",[t._v("Total Pets")]),t._v(" "),s("th",[t._v("Booking")]),t._v(" "),s("th",[t._v("Action")])])])}],!1,null,null,null).exports}}]);